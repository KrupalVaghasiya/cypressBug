name: GitHub Actions Demo
on:
  schedule:
  - cron: "0 0 * * *"
  push:
    branches:
      - 'master'

jobs:
 cypress-test:
  name: Run on windows
  runs-on: windows-latest
  steps: 
    - uses: actions/checkout@v2

    - name: Install dependencies
      run: |
        npm install
        npm install --dev
        npm run record-test

    - name: Copy execution test screenshots
      run: |
        mkdir Reports
        cp -r cypress/screenshots Reports/screenshots
    
    - name: Merge test reports
      run: npm run merge:reports

    - name: Generate HTML reports
      run: npm run create:html:report
